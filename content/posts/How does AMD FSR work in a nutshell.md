+++ 
date = "2023-10-06"
title = "How does AMD FSR work in a nutshell ?"
slug = "How does AMD FSR work in a nutshell ?"
tags = []
categories = ["Apple M1", "Gaming"]
series = []
+++

I recently came around a video on YouTube which was showing a benchmark with Baldur's Gate 3, the problem with the video is that some settings were not used correctly and for this, game performances were actually worse than they would have with the right settings.

Many people are using these settings without first understanding what they do and it's not entirely their fault because the game itself should provide a quick and short explanation what it really does and how does it work because as you might have guessed, it's not very intuitive.

## What is AMD FSR and how does it improve my fps in game ?

Let's take directly a screen from Baldur's Gate 3 settings menu where we can see a quick explanation for it is used for: 

!["bg3AmdFsrSettings"](/images/posts/howDoesAmdFsrWorkInANutshell/bg3AmdFsrSettings.png)

It mentions something about an upscaling to get better framerates at a lower resolution, so in other words, let's say you set as resolution `1920x1080`, when you boot up the game it might looks a bit weird and ugly in some scenarios but after a while you're playing, the image is going to get better. Since it is doing an upscaling, the image doesn't look a 100% good as shown here:

!["imageInGame"](/images/posts/howDoesAmdFsrWorkInANutshell/imageInGame.png)

the point is to improve performance by trading image quality for more FPS, but you sacrifice less image quality than if you scale with a simpler algorithm. So while it is still a trade-off, FSR makes it a smaller trade-off than it would normally be.

This is a really powerful tool because without it, very demanding games would not be playable with some graphics cards, like the integrated graphics card for the Apple M1. A little overview how performances look like with the AMD FSR turned on:

!["fpsAmdFsrTurnedOn"](/images/posts/howDoesAmdFsrWorkInANutshell/fpsAmdFsrTurnedOn.png)

Depending on the models and the environment to render on screen, it can be higher or stabilize around 30 fps but overall for the base Apple M1 chip it's playable.

But what happens if you turn it off ? Well things get even worse:

!["fpsAmdFsrTurnedOff"](/images/posts/howDoesAmdFsrWorkInANutshell/fpsAmdFsrTurnedOn.png)

By the way how do you activate that small window to measure fps in the game ? On macOS just open the terminal and paste the following command:

```
/bin/launchctl setenv MTL_HUD_ENABLED 1
```

Replace 1 with 0 to disable it, if the game is already running, you have to close the game and then reopen it. One small thing I found is also the fact that some settings are not really detected by the game when you change them, so if you tweak some settings but you do not see a difference, try to relaunch the game.

## Double and Triple buffering for vsync

So we talked about the AMD FSR but I also want to talk a bit about the vsync buffering, unless you have more RAM you're not really going to notice any differences but in a nutshell, with double buffering the GPU waits for the most recently rendered frame to get displayed before beginning work on the next frame. With triple buffering, the GPU starts working on the next frame after that in the third buffer and if that new frame completes first, that frame gets displayed next and the other frame in-between gets discarded.

Which one is better is a personal preference. Double buffer for the steadiest FPS, triple buffer for the faster response rate. Some people prefer steady movement, others prefer the fastest response speed.

## TLDR

These settings are not really to hard to understand, but they can be a bit confusing for not tech people, but once you understand them, you can pick the best settings for your game to improve its performances even on a medium range graphics card.